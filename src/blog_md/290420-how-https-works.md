## HTTPS工作原理

HTTP是明文传输，容易被监听(eavesdropping)、被篡改(tampering)和被冒充(pretending)，而HTTPS能够：
1. 所有信息都是*加密*传播，第三方无法窃听
2. 具有*校验机制*，一旦被篡改，通信双方会发现
3. 配备*身份证书*，防止身份被冒充

### 流程
1. 客户端发出资源请求
2. 服务端返回有CA签名的证书，里面包含服务器生成的公钥
3. 客户端有CA的公钥，利用CA的公钥验证服务器返回的证书是否是CA签名过的
4. 确认是CA签名后，客户端创建一串随机数作为密钥，然后用服务端传来的公钥对其加密
5. 服务端用私钥进行解密，得到了客户端创建得随机数
6. 双方使用密钥对信息进行对称加密后通讯

### CA认证
服务端希望使用HTTPS，生成一对密钥对，发送请求让CA机构签名
CA机构校验过后，用自己的私钥签署服务端的密钥对
CA机构会把公钥发送给客户端浏览器，客户端在接收到服务端的证书的时候，就可以用CA发的公钥解密，验证服务端的证书是否有CA的签名

### 自签认证
通常当应用发布到模拟环境下，可通过自签认证进行两个应用的HTTPS通讯。服务端生成2对密钥对，其中1对密钥对C用于对另一对A进行签名，密钥对A就是应用A的服务端的密钥对，而C就是作为*认证机构*的密钥对。把C的公钥发送给应用B，当应用B向应用A发送请求，应用A向应用B发送C签署的证书，应用B用C发来的公钥对证书进行解密，确认是由C签署后，应用A和B就可以进行HTTPS通讯。