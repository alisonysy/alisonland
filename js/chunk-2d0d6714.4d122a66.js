(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6714"],{7324:function(s,a,e){"use strict";e.r(a);var t=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},n=[function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("section",[e("p",[s._v("Event bus采用的是发布/订阅模式，常用于小到中型app里组件的解耦(decoupling)。下面是用JavaScript手写一个event bus的例子。")]),e("p",[s._v("既然是"),e("strong",[s._v("发布/订阅")]),s._v("模式，即有：订阅者(subscriber)、发布者(publisher)和事件(events)三大块。")]),e("h3",[s._v("把不同类型的事件和对应要执行的callback放到一个对象里")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" subscriptions = {}\n")])]),e("p",[s._v("一开始的对象为空，当有事件被订阅时，会在此对象上添加，同时应该对对象里每个订阅事件的函数赋予ID，用于unsubscribe，最后理想的"),e("code",{pre:!0},[s._v("subscriptions")]),s._v("对象是：")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("subscriptions ={\n  "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("eventType1")]),s._v(":{\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id1")]),s._v(": func1,\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id2")]),s._v(": func2,\n    ...\n  },\n  "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("eventType2")]),s._v(":{\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id1")]),s._v(": func1,\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id2")]),s._v(": func2,\n    ...\n  }\n}\n")])]),e("h3",[s._v("订阅函数——指明要订阅的事件和callback")]),e("p",[s._v("订阅函数需要对初次注册的callback赋予ID，同时返回"),e("code",{pre:!0},[s._v("unsubscribe")]),s._v("方法。\n"),e("strong",[s._v("ID生成函数")]),s._v("：")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("idGenerator")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" lastIndex = "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("getIndex")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{ "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//闭包用于记录上一次的lastIndex")]),s._v("\n    lastIndex += "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" lastIndex\n  }\n}\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// or use generator to create unique id")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" *"),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("idGenerator")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" i="),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("while")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("yield")]),s._v(" i++;\n  }\n}\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" getIndex = idGenerator()\n")])]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("subscribe")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("eventType, fn")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" id = getIndex(); "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//调用的是idGenerator()返回的函数，调用并不会执行`let lastIndex = 0;`，同时getIndex()包含之前的lastIndex的信息")]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!subscriptions[eventType]){\n    subscriptions[eventType] = {}\n  }\n  subscriptions[eventType][id] = fn\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("unsubscribe")]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" subscriptions[eventType][id]\n      "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//当一个事件类型没有订阅者时，删除该事件类型")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(subscriptions[eventType])){\n        "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" subscriptions[eventType]\n      }\n    }\n  }\n}\n")])]),e("h3",[s._v("发布函数——指明发布的事件和输出的参数")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("publish")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("eventType, data")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!subscriptions[eventType]){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v("\n  }\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(subscriptions[eventType]).map("),e("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("entry")]),s._v(")=>")]),s._v("{\n    subscriptions[eventType][entry].call("),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(",data)\n  })\n}\n")])]),e("h3",[s._v("完整模块输出代码")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" subscriptions = {};\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" getIndex = idGenerator();\n\n"),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("idGenerator")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" lastIndex = "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("getIndex")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{ "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//闭包用于记录上一次的lastIndex")]),s._v("\n    lastIndex += "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" lastIndex\n  }\n}\n\n"),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("subscribe")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("eventType, fn")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" id = getIndex(); "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//调用的是idGenerator()返回的函数，调用并不会执行`let lastIndex = 0;`，同时getIndex()包含之前的lastIndex的信息")]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!subscriptions[eventType]){\n    subscriptions[eventType] = {}\n  }\n  subscriptions[eventType][id] = fn\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("unsubscribe")]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" subscriptions[eventType][id]\n      "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//当一个事件类型没有订阅者时，删除该事件类型")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(subscriptions[eventType])){\n        "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" subscriptions[eventType]\n      }\n    }\n  }\n}\n\n"),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("publish")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("eventType, data")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!subscriptions[eventType]){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v("\n  }\n\n  "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(subscriptions[eventType]).map("),e("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("entry")]),s._v(")=>")]),s._v("{\n    subscriptions[eventType][entry].call("),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(",data)\n  })\n}\n\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" {subscriptions,publish,subscribe} \n")])]),e("h3",[s._v("使用")]),e("p",[s._v("import的时候，可作为单个方法引入，也可设置namespace。")]),e("ul",[e("li",[s._v("单个方法引入：")])]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" {subscribe, publish, subscriptions} "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./main1.js'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" a = subscribe("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v(","),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("args")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'doc is loaded, here is the args:'")]),s._v("+args)\n});\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//some other codes")]),s._v("\n\npublish("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v(","),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"I\'m the arg."')]),s._v(")\n\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(subscriptions["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v("]["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"1"')]),s._v("]); "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//打印出注册的函数")]),s._v("\n\na.unsubscribe();\n\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(subscriptions["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v("]["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"1"')]),s._v("]); "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//undefined")]),s._v("\n")])]),e("ul",[e("li",[s._v("用eventBus作为命名空间：")])]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-JavaScript"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" * "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("as")]),s._v(" eventBus "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./main1.js'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" a = eventBus.subscribe("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v(","),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("args")]),s._v(")")]),s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'doc is loaded, here is the args:'")]),s._v("+args)\n});\n\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'subscribed'")]),s._v(")\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//some other codes")]),s._v("\neventBus.publish("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v(","),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"I\'m the arg."')]),s._v(")\n\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(eventBus.subscriptions["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v("]["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"1"')]),s._v("]);\n\na.unsubscribe();\n\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(eventBus.subscriptions["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loaded"')]),s._v("]["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"1"')]),s._v("]);\n")])]),e("ul",[e("li",[s._v("把eventBus用作mixin")])]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" eventMixin = {\n  on(event,handler){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers) "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers = {};\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event]){\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event] = [];\n    }\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event].push(handler);\n  }\n\n  off(event,handler){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" handlers = "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers? "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event] ? "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event] : "),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" : "),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(";\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!handlers) "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" i="),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";i<handlers.length;i++){\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(handlers[i] === handler){\n        handlers.splice(i--,"),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("); "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// notice that 'i--' here enables the loop to examine the next item of the newly deleted one")]),s._v("\n      }\n    }\n  }\n\n  trigger(event,...args){\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(!"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers || !"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event]){\n      "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    }\n\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._eventHandlers[event].forEach("),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("handler")]),s._v(" =>")]),s._v(" handler.apply("),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(",args));\n  }\n}\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// using eventMixin")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-class"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Menu")]),s._v(" ")]),s._v("{\n  choose(value) {\n    "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".trigger("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"select"')]),s._v(", value);\n  }\n}\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Add the mixin with event-related methods")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".assign(Menu.prototype, eventMixin);\n\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" menu = "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Menu();\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// add a handler, to be called on selection:")]),s._v("\nmenu.on("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"select"')]),s._v(", value => alert("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`Value selected: "),e("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${value}")]),s._v("`")]),s._v("));\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// triggers the event => the handler above runs and shows:")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Value selected: 123")]),s._v("\nmenu.choose("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"123"')]),s._v(");\n")])])])}],r=e("2877"),l={},p=Object(r["a"])(l,t,n,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0d6714.4d122a66.js.map