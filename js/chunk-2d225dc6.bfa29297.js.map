{"version":3,"sources":["webpack:///./src/blog_md/270420-http-auth.md?17ac","webpack:///./src/blog_md/270420-http-auth.md"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","pre","attrs","v-pre","class","script","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d225dc6.bfa29297.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h2',[_vm._v(\"HTTP 权限控制和身份校验\")]),_c('h3',[_vm._v(\"Basic authentication\")]),_c('p',[_vm._v(\"关于前端鉴权的多种方式，首先要提及的是\"),_c('strong',[_vm._v(\"HTTP Basic authentication\")]),_vm._v(\"。HTTP提供了一个用于权限控制和认证的通用框架。\")]),_c('ol',[_c('li',[_vm._v(\"服务器可以用来针对客户端的请求质询信息\")]),_c('li',[_vm._v(\"客户端用来提供身份验证凭证\")])]),_c('h4',[_vm._v(\"流程\")]),_c('p',[_vm._v(\"信息的交换必须通过*HTTPS(TLS)*连接来保证安全。\")]),_c('ol',[_c('li',[_vm._v(\"客户端发送资源请求\")]),_c('li',[_vm._v(\"服务端返回401表示客户端未被授权，并在返回的字段首部\"),_c('code',{pre:true},[_vm._v(\"WWW-Authenticate\")]),_vm._v(\"提供如何验证的信息\")]),_c('li',[_vm._v(\"客户端在请求中添加\"),_c('code',{pre:true},[_vm._v(\"Authentication\")]),_vm._v(\"首部字段，值为身份凭证信息\")])]),_c('h3',[_vm._v(\"Token验证\")]),_c('h4',[_vm._v(\"Single Signed-On (SSO) 单点登录验证\")]),_c('p',[_vm._v(\"场景：\"),_c('strong',[_vm._v(\"跨域认证\")]),_vm._v(\" － 应用有多个域名之间希望共享登录信息，用户在其中1个域名登录过一次后，在其他域名无需重复登录。使用传统的\"),_c('em',[_vm._v(\"session-cookie\")]),_vm._v(\"无法解决，因为鉴于浏览器的同源政策，cookie只能在他被创建的域名下获取。\\n而SSO通过在一个中间域名下进行身份验证，然后把验证信息与其他域名共享来达到目的。\")]),_c('p',[_c('strong',[_vm._v(\"流程\")])]),_c('ol',[_c('li',[_vm._v(\"当客户端求资源\")]),_c('li',[_vm._v(\"服务端检测到请求没有身份信息，重定向到进行身份验证的域名\")]),_c('li',[_vm._v(\"客户端进行身份验证成功，被重定向到原来请求资源的域名并接收到身份信息的token，这个token包含所有可以进行身份验证的信息\")]),_c('li',[_vm._v(\"当客户端新进入到需要身份验证的域名时，会带上之前下发的token，会被重定向到进行身份验证的域名，该域名检测到客户端的token，验证通过重定向到要求进入的新域名\")])]),_c('h4',[_vm._v(\"JWT (JSON Web Token)\")]),_c('p',[_vm._v(\"JWT是实现跨域认证的一种解决方案，可用于SSO单点登录。以往的用户登录信息都以session的形式保存在服务器上，而JWT则让客户端保存，每次请求都返回服务器。\")]),_c('p',[_c('strong',[_vm._v(\"缺点\")]),_vm._v(\"：\")]),_c('ul',[_c('li',[_vm._v(\"由于服务器不保存session状态，导致无法在使用过程中废止某个已经签发的token\")]),_c('li',[_vm._v(\"JWT本身包含了认证信息，一旦泄露，任何人都可以获得该token的所有权限，应该设置较短的有效期，对于较为重要的权限应该再次认证\")])]),_c('p',[_c('strong',[_vm._v(\"流程\")])]),_c('ol',[_c('li',[_vm._v(\"服务器A认证了用户信息后，生成JSON对象，通过\"),_c('em',[_vm._v(\"Base64URL\")]),_vm._v(\"转换和添加签名后得到JWT字符串，返回给客户端\")]),_c('li',[_vm._v(\"客户端登录跨域的关联服务，带上JWT信息(通常放在请求中)发送给服务器B\")]),_c('li',[_vm._v(\"服务器A和服务器B因为是关联的，共享用于签名的密钥，此时服务器B通过密钥解密JWT信息，认证用户身份\\n\"),_c('em',[_vm._v(\"注\")]),_vm._v(\"：Base64URL与Base64算法有不同，Base64URL会把\"),_c('code',{pre:true},[_vm._v(\"=\")]),_vm._v(\"省略，\"),_c('code',{pre:true},[_vm._v(\"+\")]),_vm._v(\"替换成\"),_c('code',{pre:true},[_vm._v(\"-\")]),_vm._v(\"，\"),_c('code',{pre:true},[_vm._v(\"/\")]),_vm._v(\"替换成\"),_c('code',{pre:true},[_vm._v(\"_\")])])]),_c('p',[_c('strong',[_vm._v(\"组成\")]),_c('code',{pre:true},[_vm._v(\"header.payload.signature\")]),_c('em',[_vm._v(\"header\")]),_vm._v(\"：是一个JSON对象，描述JWT的元数据\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-json\"}},[_vm._v(\"{\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"\\\"alg\\\"\")]),_vm._v(\":\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"HS256\\\"\")]),_vm._v(\", //签名的算法\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"\\\"typ\\\"\")]),_vm._v(\":\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"JWT\\\"\")]),_vm._v(\" // token的类型\\n}\\n\")])]),_c('p',[_c('em',[_vm._v(\"payload\")]),_vm._v(\"：是一个JSON对象，存放用户身份信息，JWT规定了7个官方的字段，包括\")]),_c('ul',[_c('li',[_vm._v(\"iss 签发人\")]),_c('li',[_vm._v(\"exp 过期时间\")]),_c('li',[_vm._v(\"sub 主题\")]),_c('li',[_vm._v(\"aud 受众\")]),_c('li',[_vm._v(\"nbf 生效时间\")]),_c('li',[_vm._v(\"iat 签发时间\")]),_c('li',[_vm._v(\"jti 编号\")])]),_c('p',[_vm._v(\"另外，还支持定义私有字段\")]),_c('p',[_c('em',[_vm._v(\"signature\")]),_vm._v(\"：对前两部分进行签名，防止数据篡改。使用\"),_c('em',[_vm._v(\"header\")]),_vm._v(\"指定的算法，按照以下公式产生签名：\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-js\"}},[_vm._v(\"HMACSHA256( \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"//算法加密方法\")]),_vm._v(\"\\n  base64UrlEncode(header) + \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'.'\")]),_vm._v(\" +\\n  base64UrlEncode(payload),\\n  secret\\n)\\n\")])]),_c('p',[_vm._v(\"然后把header，payload，signature三部分拼成一个字符串并用\"),_c('code',{pre:true},[_vm._v(\".\")]),_vm._v(\"分隔再返回给用户\")])])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./270420-http-auth.md?vue&type=template&id=60115d74&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}