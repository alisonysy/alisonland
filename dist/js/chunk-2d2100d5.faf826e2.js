(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2100d5"],{b5f2:function(s,a,e){"use strict";e.r(a);var t=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},r=[function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("section",[e("h2",[s._v("5种优化图片提升浏览器加载性能的方法：")]),e("ul",[e("li",[s._v("剪裁图片")]),e("li",[s._v("设置最佳的格式")]),e("li",[s._v("降低图片清晰度")]),e("li",[s._v("压缩")]),e("li",[s._v("去除metadata")])]),e("p",[s._v("建议：")]),e("ul",[e("li",[s._v("源文件储存无损格式图片，通过构建工具或压缩软件把压缩过的图片在网页上最终呈现")])]),e("h2",[s._v("优化位图")]),e("p",[s._v("每个像素(pixel)储存"),e("strong",[s._v("RGBA")]),s._v("值：R - red channel, G - green channel, B - blue channel, A - alpha channel。\n浏览器为每个通道各分配256个值(色阶)，相当于每个通道有8位(2^8=256)，而每个像素需要4字节(4 channels x 8 bits = 32 bits = 4 bytes)，因此一个100px x 100px大的图像需要：")]),e("p",[s._v("100 x 100 = 10,000像素")]),e("p",[s._v("10,000 x 4 bytes = 40,000 bytes")]),e("p",[s._v("40,000 / 1024 = 39KB")]),e("p",[s._v("减少图像大小的一个简单策略是——减少"),e("em",[s._v("位深")]),s._v("，从每个通道8位，即一共256 x 256 x 256 = 16,777,216种颜色，裁剪到更少的颜色。")]),e("blockquote",[e("p",[s._v("当x表示“位每像素”时，x位/像素的图像能表示"),e("strong",[s._v("2^x")]),s._v("种颜色；当x表示“位每通道”时，x位/通道的图像能表示**2^(3*x)**种颜色")])]),e("h2",[s._v("图片优化清单")]),e("ul",[e("li",[s._v("优先选择矢量图格式")]),e("li",[s._v("压缩SVG")]),e("li",[s._v("选择适合的位图格式")]),e("li",[s._v("尝试不同的位图质量")]),e("li",[s._v("清除不必要的metadata")]),e("li",[s._v("尽量使图片资源大小等于网页展示的图片大小")])]),e("h3",[s._v("JPEG压缩模式")]),e("ol",[e("li",[s._v("顺序JPEG(baseline JPEG) - 从上到下加载")]),e("li",[s._v("渐进式JPEG(progressive JPEG) - 从模糊到清晰加载")])]),e("p",[s._v("PJPEG优势：更好的用户体验，节省用户流量\nPJPEG劣势：更长的解压时间(3倍)，消耗CPU，对于小图像文件更大")]),e("h3",[s._v("色度采样 - chroma subsampling")]),e("p",[s._v("色度采样对视觉影像较小，以A:B:C的形式，分别表示：")]),e("ul",[e("li",[s._v("A - 行像素数")]),e("li",[s._v("B - 第一行的颜色数")]),e("li",[s._v("C - 第二行的颜色数")])]),e("p",[s._v("4:4:4 没有压缩，颜色和亮度完整加载；适用于屏幕截图、横幅和按钮\n4:2:2 水平采样一半，垂直全采样\n4:2:0 对第一行像素的一半进行颜色采样，并忽略第二行；适用于照片\n避免用于含字体的图像")]),e("h3",[s._v("WebP图片格式")]),e("p",[s._v("对于"),e("strong",[s._v("有损")]),s._v("压缩，相对JPEG文件小25-34%；而低质量图片，WebP比JPEG更有优势因为它能模糊掉块状伪影(blockiness artifacts)？通常"),e("code",{pre:!0},[s._v("-m 4 -q 75")]),s._v("是默认的平衡设置；需要更高质量的话，WebP的优势会不明显。对于性能要求大于质量要求的，推荐使用WebP。\n对于"),e("strong",[s._v("无损")]),s._v("压缩，WebP无损文件比PNG小26%，无损加载时间相对PNG降低3%。\nWebP有无损的8位的"),e("strong",[s._v("透明度")]),s._v("通道，比PNG只多了22%的字节大小，同时作为WebP独有的，它支持有损的RGB透明度。")]),e("p",[s._v("可以通过"),e("code",{pre:!0},[s._v("imagemin")]),s._v("插件把图片压缩并转换成WebP格式：")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" imagemin = "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'imagemin'")]),s._v(");\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" imageminWebp = "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'imagemin-webp'")]),s._v(");\n\nimagemin(["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'images/*.{jpg,png}'")]),s._v("], "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'build/images'")]),s._v(", {\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("use")]),s._v(": [\n        imageminWebp({"),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("quality")]),s._v(":"),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("75")]),s._v(","),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lossless")]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("})\n    ]\n}).then("),e("span",{pre:!0,attrs:{class:"hljs-function"}},[e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n    "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Images optimized'")]),s._v(");\n});\n")])]),e("p",[s._v("用"),e("code",{pre:!0},[s._v("<picture>")]),s._v("在Chrome上显示WebP，而在Firefox上显示其他格式：")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("picture")]),s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("source")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("srcset")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'paul_irish.jxr'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'image/vnd.ms-photo'")]),s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("source")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("srcset")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'paul_irish.jp2'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'image/jp2'")]),s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("source")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("srcset")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'paul_irish.webp'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'image/webp'")]),s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("img")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("src")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'paul_irish.jpg'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("alt")]),s._v("="),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'paul'")]),s._v(">")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("picture")]),s._v(">")]),s._v("\n")])]),e("h3",[s._v("动态GIF应该转换为视频格式")]),e("p",[s._v("同一个文件，"),e("code",{pre:!0},[s._v(".mp4")]),s._v("格式比"),e("code",{pre:!0},[s._v(".gif")]),s._v("格式能削减80%的大小，且更快的加载时间。因为GIF以"),e("em",[s._v("无损")]),s._v("方式保存每帧(我们平常看到的低质量是由于GIF有限的256种颜色)，而MP4是以有损JPEG保存每帧")]),e("h3",[s._v("减少无用的图像解码和调整大小的成本")]),e("p",[s._v("当浏览器抓取图像时，需要先从原来的格式解码成位图，保存在内存里；之后通常会涉及对图像大小进行调整，两者都会延迟显示图像的时间。")]),e("h3",[s._v("颜色管理")]),e("h4",[s._v("颜色模型")]),e("p",[s._v("颜色模型是从基础颜色生成完整的颜色范围的系统。不同的色彩空间(color spaces)通过不同的参数去控制色彩。")]),e("ol",[e("li",[s._v("加色法色彩模型(additive color models) - 用光显示颜色，如RGB，用于电子显示")]),e("li",[s._v("减色法色彩模型(subtractive color models) - 通过把光消除显示颜色，如CMYK，用于印刷")])]),e("h4",[s._v("色彩空间")]),e("p",[s._v("色彩空间是图片能够展示的特定的一系列色彩。"),e("strong",[s._v("sRGB")]),s._v("是建立在RGB基础上一个用于网页的标准色彩空间。sRGB比Adobe RGB和ProPhoto RGB小，能表示的颜色少。")]),e("p",[e("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/automating-image-optimization/images/color-wheel_hazsbk.jpg"}},[s._v("色彩空间对比")])]),e("p",[s._v("大于sRGB的色彩空间被称为宽色域(wide-gamut)")]),e("h4",[s._v("其他色彩相关压缩")]),e("p",[s._v("伽玛校正和压缩(gamma correction and compression): 控制一个图像的亮度")]),e("p",[s._v("色彩档案(color profiles): 描述一个设备的色彩空间，用于在不同的色彩空间中转换，以确保同一张图片在不同的设备中显示一致；ImageOptim会自动删除色彩档案")]),e("h3",[s._v("提前加载重要图片")]),e("p",[s._v("可以通过"),e("code",{pre:!0},[s._v("<link rel=preload>")]),s._v("来强制浏览器在不阻塞"),e("code",{pre:!0},[s._v("onload")]),s._v("事件的前提下发送请求，图像请求可以用"),e("code",{pre:!0},[s._v("as")]),s._v("属性："),e("code",{pre:!0},[s._v('<link rel="preload" as="image" href="logo.png" />')])]),e("p",[s._v("提前加载的图片通常是网页上部的大图，尽量"),e("strong",[s._v("避免")]),s._v("加载不能用于所有浏览器的图片格式，e.g. WebP；"),e("strong",[s._v("避免")]),s._v("加载定义在"),e("code",{pre:!0},[s._v("srcset")]),s._v("里的响应式图像")])])}],_=e("2877"),v={},p=Object(_["a"])(v,t,r,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d2100d5.faf826e2.js.map